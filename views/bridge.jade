include mixins/flagList
include mixins/bandwidth-stats
include mixins/uptime-stats
include mixins/client-stats

extends layout

block content
    .pure-g
        .pure-u-1
            if model
                .text-content
                .fast-look.pure-g-r(class=model.running)
                    .pure-u-1-3
                        .text-content
                            h4 nickname
                            p #{model.nickname}
                    .pure-u-1-3
                        .text-content
                            if model.running
                                h4 uptime
                                p !{format.uptimeFull(model.last_restarted)}
                            else
                                h4 downtime
                                p !{format.uptimeFull(model.last_seen)}
                    .pure-u-1-3
                        .text-content
                            h4 running
                            p(class=model.running) #{model.running}
                .page-properties
                    .text-content
                        .property
                            h5 Hashed fingerprint
                            p.align-center.no-width-limit #{model.hashed_fingerprint}

                    +flagList(model.flags, model.inLatestConsensus)

                    .pure-g-r
                        //- first column
                        .pure-u-1-2
                            .text-content
                                .property
                                    h5 OR address
                                    ul.property-content.item-list
                                        if model.or_addresses
                                            each or_address in model.or_addresses
                                                li #{or_address}
                                        else
                                            li none
                                .property
                                    h5 Advertised Bandwidth
                                    p.property-content #{format.bandwidth(model.advertised_bandwidth)}
                        .pure-u-1-2
                            .text-content
                                .property
                                    h5 Last Restarted
                                    p.property-content #{model.last_restarted}
                                .property
                                    h5 Platform
                                    p.property-content #{model.platform}
                                .property
                                    h5 Pool Assignment
                                    p.property-content #{model.pool_assignment}
            else
                .text-content
                    p.align-center.no-width-limit No detail found <i class="fa fa-meh-o"></i>
    .tabs
        each period, index in model.periods
            .tab
                input(type='radio', id='tab-' + index, name='tab-grp', checked)
                label(for='tab-' + index) #{period.title}
                .tab-content
                    +bandwidthStats(model.bandwidthGraphUrl, period.key, period.avg)
                    +uptimeStats(model.uptimeGraphUrl, period.key, period.avg)
                    +clientStats(model.clientGraphUrl, period.key, period.avg)